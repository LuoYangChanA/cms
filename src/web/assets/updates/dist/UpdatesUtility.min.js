!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/",__webpack_require__(__webpack_require__.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _updates_src_UpdatesUtility_scss__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_updates_src_UpdatesUtility_scss__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_updates_src_UpdatesUtility_scss__WEBPACK_IMPORTED_MODULE_0__);!function($){Craft.UpdatesUtility=Garnish.Base.extend({$body:null,showUpdates:!1,criticalUpdateAvailable:!1,allowUpdates:null,installableUpdates:null,init:function init(){var _this=this;this.$body=$("#content");var $graphic=$("#graphic"),$status=$("#status");this.installableUpdates=[];var data_forceRefresh=!0,data_includeDetails=!0;Craft.cp.checkForUpdates(!0,!0,(function(info){if(_this.allowUpdates=info.allowUpdates,info.updates.cms&&_this.processUpdate(info.updates.cms,!1),info.updates.plugins&&info.updates.plugins.length)for(var i=0;i<info.updates.plugins.length;i++)_this.processUpdate(info.updates.plugins[i],!0);if(_this.showUpdates){if($graphic.remove(),$status.remove(),_this.installableUpdates.length){var headingText=Craft.t("app","{num, number} {num, plural, =1{Available Update} other{Available Updates}}",{num:_this.installableUpdates.length});$("#header h1").text(headingText)}_this.allowUpdates&&_this.installableUpdates.length>1&&_this.createUpdateForm(Craft.t("app","Update all"),_this.installableUpdates).insertAfter($("#header > .flex:last"))}else $graphic.addClass("success"),$status.text(Craft.t("app","Youâ€™re all up to date!"))}))},processUpdate:function processUpdate(updateInfo,isPlugin){if(updateInfo.releases.length||updateInfo.abandoned){this.showUpdates=!0;var update=new Update(this,updateInfo,isPlugin);update.installable&&this.installableUpdates.push(update)}},createUpdateForm:function createUpdateForm(label,updates){var $form=$("<form/>",{method:"post"});$form.append(Craft.getCsrfInput()),$form.append($("<input/>",{type:"hidden",name:"action",value:"updater"})),$form.append($("<input/>",{type:"hidden",name:"return",value:"utilities/updates"}));for(var i=0;i<updates.length;i++)$form.append($("<input/>",{type:"hidden",name:"install["+updates[i].updateInfo.handle+"]",value:updates[i].updateInfo.latestVersion})),$form.append($("<input/>",{type:"hidden",name:"packageNames["+updates[i].updateInfo.handle+"]",value:updates[i].updateInfo.packageName}));return $form.append($("<button/>",{type:"submit",text:label,class:"btn submit"})),$form}});var Update=Garnish.Base.extend({updateInfo:null,isPlugin:null,installable:!1,$container:null,$header:null,$contents:null,$releaseContainer:null,$showAllLink:null,licenseHud:null,$licenseSubmitBtn:null,licenseSubmitAction:null,init:function init(updatesPage,updateInfo,isPlugin){this.updatesPage=updatesPage,this.updateInfo=updateInfo,this.isPlugin=isPlugin,this.installable=!!this.updateInfo.releases.length,this.createPane(),this.initReleases(),this.createHeading(),this.createCta(),this.updateInfo.abandoned?$('<blockquote class="note"><p>'+this.updateInfo.statusText+"</p></blockquote>").insertBefore(this.$releaseContainer):"eligible"!==this.updateInfo.status&&($('<blockquote class="note ineligible"><p>'+this.updateInfo.statusText+"</p></blockquote>").insertBefore(this.$releaseContainer),"expired"!==this.updateInfo.status&&null!==this.updateInfo.latestVersion||(this.installable=!1))},createPane:function createPane(){this.$container=$('<div class="update"/>').appendTo(this.updatesPage.$body),this.$header=$('<div class="update-header"/>').appendTo(this.$container),this.$contents=$('<div class="readable"/>').appendTo(this.$container),this.$releaseContainer=$('<div class="releases"/>').appendTo(this.$contents)},createHeading:function createHeading(){$('<div class="readable left"/>').appendTo(this.$header).append($("<h1/>",{text:this.updateInfo.name}))},createCta:function createCta(){if(this.updatesPage.allowUpdates&&this.updateInfo.latestVersion&&!1!==this.updateInfo.ctaUrl){var $buttonContainer=$('<div class="buttons right"/>').appendTo(this.$header);void 0!==this.updateInfo.ctaUrl?$("<a/>",{class:"btn submit",text:this.updateInfo.ctaText,href:this.updateInfo.ctaUrl}).appendTo($buttonContainer):this.updatesPage.createUpdateForm(this.updateInfo.ctaText,[this]).appendTo($buttonContainer)}},initReleases:function initReleases(){for(var i=0;i<this.updateInfo.releases.length;i++)new Release(this,this.updateInfo.releases[i])}}),Release=Garnish.Base.extend({update:null,releaseInfo:null,notesId:null,$container:null,$headingContainer:null,init:function init(update,releaseInfo){this.update=update,this.releaseInfo=releaseInfo,this.notesId="notes-"+Math.floor(1e6*Math.random()),this.createContainer(),this.createHeading(),this.releaseInfo.notes&&(this.createReleaseNotes(),new Craft.FieldToggle(this.$headingContainer))},createContainer:function createContainer(){this.$container=$('<div class="pane release"/>').appendTo(this.update.$releaseContainer),this.releaseInfo.critical&&this.$container.addClass("critical")},createHeading:function createHeading(){this.releaseInfo.notes?this.$headingContainer=$("<a/>",{class:"release-info fieldtoggle","data-target":this.notesId}):this.$headingContainer=$("<div/>",{class:"release-info"}),this.$headingContainer.appendTo(this.$container),$("<h2/>",{text:this.releaseInfo.version}).appendTo(this.$headingContainer),this.releaseInfo.critical&&$("<strong/>",{class:"critical",text:Craft.t("app","Critical")}).appendTo(this.$headingContainer),this.releaseInfo.date&&$("<span/>",{class:"date",text:Craft.formatDate(this.releaseInfo.date)}).appendTo(this.$headingContainer)},createReleaseNotes:function createReleaseNotes(){var $notes=$("<div/>",{id:this.notesId}).appendTo(this.$container).append($("<div/>",{class:"release-notes"}).html(this.releaseInfo.notes));this.releaseInfo.critical||$notes.find("blockquote").length?this.$headingContainer.addClass("expanded"):$notes.addClass("hidden")}},{maxInitialUpdateHeight:500})}(jQuery)},function(module,exports,__webpack_require__){var content=__webpack_require__(2);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[module.i,content,""]]),content.locals&&(module.exports=content.locals);var add,update=(0,__webpack_require__(3).default)("52a1c0b2",content,!0,{})},function(module,exports,__webpack_require__){},function(module,__webpack_exports__,__webpack_require__){"use strict";function listToStyles(parentId,list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css,media,sourceMap,part={id:parentId+":"+i,css:item[1],media:item[2],sourceMap:item[3]};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return addStylesClient}));var hasDocument="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!hasDocument)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var stylesInDom={},head=hasDocument&&(document.head||document.getElementsByTagName("head")[0]),singletonElement=null,singletonCounter=0,isProduction=!1,noop=function(){},options=null,ssrIdKey="data-vue-ssr-id",isOldIE="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function addStylesClient(parentId,list,_isProduction,_options){isProduction=_isProduction,options=_options||{};var styles=listToStyles(parentId,list);return addStylesToDom(styles),function update(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle;(domStyle=stylesInDom[item.id]).refs--,mayRemove.push(domStyle)}newList?addStylesToDom(styles=listToStyles(parentId,newList)):styles=[];for(var i=0;i<mayRemove.length;i++){var domStyle;if(0===(domStyle=mayRemove[i]).refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}}function addStylesToDom(styles){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j]));domStyle.parts.length>item.parts.length&&(domStyle.parts.length=item.parts.length)}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j]));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function createStyleElement(){var styleElement=document.createElement("style");return styleElement.type="text/css",head.appendChild(styleElement),styleElement}function addStyle(obj){var update,remove,styleElement=document.querySelector("style["+ssrIdKey+'~="'+obj.id+'"]');if(styleElement){if(isProduction)return noop;styleElement.parentNode.removeChild(styleElement)}if(isOldIE){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement()),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else styleElement=createStyleElement(),update=applyToTag.bind(null,styleElement),remove=function(){styleElement.parentNode.removeChild(styleElement)};return update(obj),function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}var replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}),textStore;function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media&&styleElement.setAttribute("media",media),options.ssrId&&styleElement.setAttribute(ssrIdKey,obj.id),sourceMap&&(css+="\n/*# sourceURL="+sourceMap.sources[0]+" */",css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}}]);
//# sourceMappingURL=UpdatesUtility.min.js.map